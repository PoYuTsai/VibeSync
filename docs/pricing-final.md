# VibeSync 定價方案 (最終版)

> **決定日期：2026-02-26**
> **目標用戶：個人用戶**
> **計費模式：訊息制**

---

## 訊息計算邏輯

### 核心規則

```
1 則訊息 = 1 次換行分隔的文字區塊，上限 200 字
```

### 詳細規則

| 規則 | 說明 | 範例 |
|------|------|------|
| **換行分割** | 以換行符號 (`\n`) 分割訊息 | 3 行 = 3 則 |
| **字數上限** | 單則超過 200 字，每 200 字額外 +1 則 | 450 字 = 3 則 |
| **最小計費** | 至少 1 則 | 空白也算 1 則 |
| **連續換行** | 多個連續換行視為 1 個分隔 | `\n\n\n` = 1 個分隔 |

### 計算公式

```typescript
function countMessages(text: string): number {
  // 1. 用換行分割，過濾空行
  const lines = text.split(/\n+/).filter(line => line.trim().length > 0);

  // 2. 計算每行的訊息數 (每 200 字 = 1 則)
  let total = 0;
  for (const line of lines) {
    const charCount = line.trim().length;
    total += Math.max(1, Math.ceil(charCount / 200));
  }

  // 3. 最少 1 則
  return Math.max(1, total);
}
```

### 範例

| 輸入 | 計算 | 結果 |
|------|------|------|
| `"你好"` | 1 行 × 2 字 | **1 則** |
| `"你好\n在嗎\n吃飯了嗎"` | 3 行 × 各 <200 字 | **3 則** |
| `"(250字的長文)"` | 1 行 × 250 字 = ceil(250/200) | **2 則** |
| `"(100字)\n(300字)\n(50字)"` | 1 + 2 + 1 | **4 則** |

### 邊界情況處理

| 情況 | 處理 |
|------|------|
| 空白輸入 | 提示「請輸入對話內容」，不扣額度 |
| 只有空格/換行 | 同上 |
| 超過 5000 字 | 提示「內容過長，請分批分析」 |
| 含 emoji | 正常計算，1 emoji = 1 字 |
| 含圖片/貼圖描述 | 用戶需手動描述，按文字計算 |

---

## 訂閱方案

### 方案設計 (2 付費方案)

| 方案 | 月費 | USD | 訊息/月 | 每日上限 | 定位 |
|------|------|-----|---------|----------|------|
| **Free** | NT$0 | $0 | 30 則 | 15 則 | 體驗試用 |
| **Starter** | NT$149 | ~$5 | 300 則 | 50 則 | 輕度用戶 |
| **Essential** | NT$349 | ~$11 | 1,000 則 | 150 則 | 主力方案 |

### 功能對照

| 功能 | Free | Starter | Essential |
|------|------|---------|-----------|
| 訊息額度/月 | 30 | 300 | 1,000 |
| 每日上限 | 15 | 50 | 150 |
| 熱度分析 | ✓ | ✓ | ✓ |
| 延展回覆 | ✓ | ✓ | ✓ |
| 共鳴回覆 | ✗ | ✓ | ✓ |
| 調情回覆 | ✗ | ✓ | ✓ |
| Needy 警示 | ✗ | ✓ | ✓ |
| 對話歷史 | 3 個 | 15 個 | 50 個 |
| AI 模型 | Haiku | 混合 | Sonnet 優先 |
| 免費試用 | - | 7 天 | 7 天 |

### App Store Tier 對應

| 方案 | 目標價 | iOS Tier | 實際價 |
|------|--------|----------|--------|
| Starter | NT$149 | Tier 5 | NT$170 ($4.99) |
| Essential | NT$349 | Tier 11 | NT$350 ($10.99) |

### 年繳優惠

| 方案 | 月繳 | 年繳 (等於) | 折扣 |
|------|------|-------------|------|
| Starter | NT$149/月 | NT$99/月 (年繳 NT$1,190) | 33% off |
| Essential | NT$349/月 | NT$233/月 (年繳 NT$2,790) | 33% off |

---

## 加購訊息包

| 訊息包 | 價格 | 每則成本 |
|--------|------|----------|
| 50 則 | NT$39 | NT$0.78 |
| 150 則 | NT$99 | NT$0.66 |
| 300 則 | NT$179 | NT$0.60 |

> 加購比訂閱貴，鼓勵升級訂閱

---

## 成本與毛利

| 方案 | 月費 | 我們成本 | 毛利率 |
|------|------|----------|--------|
| Free | NT$0 | ~$0.03 | - |
| Starter | NT$149 | ~$0.30 | 94% |
| Essential | NT$349 | ~$1.00 | 91% |

### 損益平衡

| 月成本 | 需 Starter | 需 Essential |
|--------|-----------|--------------|
| NT$2,000 | 14 人 | 6 人 |
| NT$5,000 | 34 人 | 15 人 |

---

## UI 顯示規則

### 分析前預覽

```
┌─────────────────────────────────────────┐
│  本次分析：12 則訊息                    │
│                                         │
│  剩餘額度：288 / 300 則                 │
│  ████████████████████████░░░            │
│                                         │
│  [取消]              [確認分析]         │
└─────────────────────────────────────────┘
```

### 額度不足

```
┌─────────────────────────────────────────┐
│  訊息額度不足                           │
│                                         │
│  本次需要：25 則                        │
│  剩餘額度：18 則                        │
│                                         │
│  [加購額度]         [升級方案]          │
└─────────────────────────────────────────┘
```

### 每日上限

```
┌─────────────────────────────────────────┐
│  今日分析額度已用完                     │
│                                         │
│  今日已用：50 / 50 則                   │
│  明天重置：還有 6 小時 23 分            │
│                                         │
│  💡 升級 Essential 每日可用 150 則      │
│                                         │
│  [升級方案]              [知道了]       │
└─────────────────────────────────────────┘
```
